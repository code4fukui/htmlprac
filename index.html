<!DOCTYPE html>
<html>

<head>
    <style>
    @font-face {
        font-family: "ichigojam";
        font-style: normal;
        font-weight: 400;
        src: local('IchigoJam-1.4'), local('IchigoJam-1.4-Regular'),
            url("https://cdn.jsdelivr.net/gh/fu-sen/ichigojam-font@20190814/IchigoJam-1.4.woff") format('woff');
    }
    a {
        color: gray !important;
    }
    </style>

    <meta charset="utf-8">
    <title>Webプログラミング 道場</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"></script>
    <script>
        let g_editor;

        function エディタを作る(){
            g_editor = ace.edit("elmEditor");
            g_editor.setOptions({
                fontFamily: "ichigojam",
                fontSize: "12px",
            });
            g_editor.container.style.lineHeight = 1.4;
            g_editor.renderer.updateFontSize();
            g_editor.setTheme("ace/theme/monokai");
            g_editor.getSession().setMode("ace/mode/html");
        }

        function 見てみる(){
            elmPreview.src = URL.createObjectURL(new Blob([g_editor.getValue()], { type: "text/html" }));
        }

        function SAVEする(){
            elmSave.download = `WebDOJO.${Date.now()}.html`;
            elmSave.href = URL.createObjectURL(new Blob([g_editor.getValue()], { type: "application/octet-stream" }));
            elmSave.click();
        }

        function LOADする(){
            const f = new FileReader();
            f.onload = function(){
                g_editor.setValue( f.result );
            };
            f.readAsText(elmLoad.files[0]);
        }
    </script>
</head>

<body style="height:100vh;">
    <div style="height:3em;">
        <div style="float:right; ">
            <button onclick="見てみる();" style="font-size:1.2em;">見てみる</button>
            <button onclick="SAVEする();" style="font-size:1.2em;">SAVEする<a id="elmSave"></a></button>
            <button onclick="elmLoad.click();" style="font-size:1.2em;">LOADする<input id="elmLoad" type="file" onchange="LOADする();" hidden></button>
        </div>
        <h1 style="font-size:1.5em;">
            Webプログラミング 道場
        </h1>
    </div>
    <div style="height:calc(100vh - 7em);">
        <div style="float:left; width:50%; height:100%;" id="elmEditor"></div>
        <script>エディタを作る();</script>
        <div style="float:right; width:50%; height:100%;">
            <iframe id="elmPreview" style="width:100%; height:100%;" src="data:text/html;charset=utf-8;base64,5bem5YG0KOOCqOODh+OCo+OCvynjgatIVE1M44KS5pu444GE44Gm44CM6KaL44Gm44G/44KL44CN44Oc44K/44Oz44KS44CC"></iframe>
        </div>
    </div>
    <div style="padding-top:15px; ">
        <div style="float:right; ">
            v20211110 by <a href="https://github.com/code4fukui/htmlprac" target="_blank">Code for FUKUI</a> / font: <a href=https://15jamrecipe.jimdofree.com/%E3%83%84%E3%83%BC%E3%83%AB/%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88-truetype/>IchigoJam FONT by Fu-sen</a>
        </div>
    </div>
</body>

</html>
